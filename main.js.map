{"version":3,"sources":["./src/app/helpers/heart-rate.helper.ts","./src/app/helpers/index.ts","./src/environments/environment.ts","./src/app/devices/heart-rate.device.ts","./src/app/helpers/type-guards.helper.ts","./src/app/components/app/app.component.ts","./src/app/components/app/app.component.html","./src/app/components/heart-rate/heart-rate.component.ts","./src/app/components/heart-rate/heart-rate.component.html","./src/app/app.module.ts","./src/app/helpers/bluetooth.helper.ts","./src/app/components/trainer/trainer.component.ts","./src/app/components/trainer/trainer.component.html","./src/app/constants.ts","./src/app/app-routing.module.ts","./src/main.ts","./$_lazy_route_resource lazy namespace object"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["import { HeartRateResult } from '../contracts';\nimport { isDataView } from './type-guards.helper';\n\nexport function parseHeartRate(value: DataView | ArrayBuffer): HeartRateResult {\n    // In Chrome 50+, a DataView is returned instead of an ArrayBuffer.\n    value = isDataView(value) ? value : new DataView(value);\n    const flags = value.getUint8(0);\n    const rate16Bits = flags & 0x1;\n    const result: Partial<HeartRateResult> = {};\n\n    let index = 1;\n    let heartRate: number;\n    if (rate16Bits) {\n        heartRate = value.getUint16(index, /*littleEndian=*/ true);\n        index += 2;\n    } else {\n        heartRate = value.getUint8(index);\n        index += 1;\n    }\n\n    const contactDetected = flags & 0x2;\n    const contactSensorPresent = flags & 0x4;\n    if (contactSensorPresent) {\n        result.contactDetected = !!contactDetected;\n    }\n\n    const energyPresent = flags & 0x8;\n    if (energyPresent) {\n        result.energyExpended = value.getUint16(index, /*littleEndian=*/ true);\n        index += 2;\n    }\n\n    const rrIntervalPresent = flags & 0x10;\n    if (rrIntervalPresent) {\n        result.rrIntervals = [];\n        for (; index + 1 < value.byteLength; index += 2) {\n            result.rrIntervals.push(value.getUint16(index, /*littleEndian=*/ true));\n        }\n    }\n\n    return { heartRate, ...result };\n}\n","export * from './heart-rate.helper';\nexport * from './type-guards.helper';\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n    production: false,\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { Injectable } from '@angular/core';\nimport { merge, Observable } from 'rxjs';\nimport { map, share, switchMap, takeUntil, tap } from 'rxjs/operators';\n\nimport { HeartRateResult } from '../contracts';\nimport { parseHeartRate } from '../helpers';\nimport { connectServer, getNotifications, getService, requestDevice, timeOutStream } from '../helpers/bluetooth.helper';\n\n@Injectable()\nexport class HeartRateDevice {\n    private server?: BluetoothRemoteGATTServer;\n    private characteristic?: BluetoothRemoteGATTCharacteristic;\n\n    public connect(): Observable<HeartRateResult> {\n        return requestDevice(['heart_rate']).pipe(switchMap((server) => this.subscribeToUpdates(server)));\n    }\n\n    public async disconnect(): Promise<boolean> {\n        if (this.characteristic != null) {\n            console.log(`Stopping notifications`, this.characteristic);\n            try {\n                await this.characteristic.stopNotifications();\n            } catch (e) {\n                console.log(`Error stopping notifications: `, e);\n            }\n        }\n\n        if (this.server) {\n            console.log(`Stopping server`, this.server);\n            this.server.disconnect();\n        }\n\n        this.server = undefined;\n        this.characteristic = undefined;\n\n        return true;\n    }\n\n    private subscribeToUpdates(server: BluetoothRemoteGATTServer) {\n        this.server = server;\n\n        const updatesStream = connectServer(server).pipe(\n            switchMap((server) => getService(server, 'heart_rate')),\n            switchMap((service) => service.getCharacteristic('heart_rate_measurement')),\n            tap((characteristic) => {\n                this.characteristic = characteristic;\n            }),\n            switchMap((characteristic) => getNotifications(characteristic)),\n            map(parseHeartRate),\n            share(),\n        );\n\n        return merge(timeOutStream<HeartRateResult>(60000).pipe(takeUntil(updatesStream)), updatesStream);\n    }\n}\n","export function isDataView(value: unknown): value is DataView {\n    return value != null && (value as DataView).buffer instanceof ArrayBuffer;\n}\n","import { Component } from '@angular/core';\n\n@Component({\n    selector: 'app-root',\n    templateUrl: './app.component.html',\n    styleUrls: ['./app.component.scss'],\n})\nexport class AppComponent {}\n","\n<div class=\"container\">\n\n    <heart-rate></heart-rate>\n\n    <trainer></trainer>\n</div>","import { Component } from '@angular/core';\nimport { Subscription } from 'rxjs';\n\nimport { NOT_FOUND_ERROR } from '../../constants';\nimport { HeartRateResult } from '../../contracts';\nimport { HeartRateDevice } from '../../devices/heart-rate.device';\n\nconst connectButtonText = 'Connect HRM';\n\n@Component({\n    selector: 'heart-rate',\n    templateUrl: './heart-rate.component.html',\n    styleUrls: ['./heart-rate.component.scss'],\n})\nexport class HeartRateComponent {\n    constructor(private heartRateDevice: HeartRateDevice) {}\n\n    private _warningMessage?: string;\n\n    public get warningMessage(): string | undefined {\n        return this._warningMessage;\n    }\n\n    private _errorMessage?: string;\n\n    public get errorMessage(): string | undefined {\n        return this._errorMessage;\n    }\n\n    private _heartRate?: number;\n\n    public get heartRate(): number | undefined {\n        return this._heartRate;\n    }\n\n    private _buttonText: string | undefined = connectButtonText;\n\n    public get buttonText(): string | undefined {\n        return this._buttonText;\n    }\n\n    private _buttonEnabled = true;\n\n    public get buttonEnabled(): boolean {\n        return this._buttonEnabled;\n    }\n\n    private subscription?: Subscription;\n\n    public async disconnect(): Promise<void> {\n        this.reset();\n\n        if (this.subscription) {\n            this.subscription.unsubscribe();\n            this.subscription = undefined;\n        }\n        await this.heartRateDevice.disconnect();\n    }\n\n    public dismissMessages(): void {\n        this._warningMessage = undefined;\n        this._errorMessage = undefined;\n    }\n\n    public connectSensor(): void {\n        this.reset();\n        this._buttonEnabled = false;\n        this._buttonText = 'Connecting...';\n        this.subscription = this.heartRateDevice.connect().subscribe(\n            (result) => this.handleHeartRate(result),\n            (error) => this.handleError(error, 'Error connecting to sensor'),\n        );\n    }\n\n    private reset(): void {\n        this._buttonEnabled = true;\n        this._buttonText = connectButtonText;\n        this._warningMessage = undefined;\n        this._errorMessage = undefined;\n        this._heartRate = undefined;\n    }\n\n    private handleHeartRate(result: HeartRateResult) {\n        this.reset();\n        this._buttonEnabled = false;\n        this._buttonText = undefined;\n        this._heartRate = result.heartRate;\n        console.log(`Heart Rate Result`, result);\n    }\n\n    private handleError(error: unknown, message?: string) {\n        this.reset();\n        if (error instanceof DOMException && error.name === NOT_FOUND_ERROR) {\n            this._warningMessage = `No Device Selected`;\n        } else {\n            this._errorMessage = `${message ? message + ': ' : ''}${error}`;\n        }\n    }\n}\n","<div class=\"col-sm m-auto\">\n\n    <div *ngIf=\"warningMessage != null\" class=\"alert alert-warning alert-dismissible mt-3\">\n        {{warningMessage}}\n\n        <button type=\"button\" class=\"close\" aria-label=\"Close\" (click)=\"dismissMessages()\">\n            <span aria-hidden=\"true\">&times;</span>\n        </button>\n    </div>\n\n    <div *ngIf=\"errorMessage != null\" class=\"alert alert-danger alert-dismissible mt-3\">\n        {{errorMessage}}\n\n        <button type=\"button\" class=\"close\" aria-label=\"Close\" (click)=\"dismissMessages()\">\n            <span aria-hidden=\"true\">&times;</span>\n        </button>\n    </div>\n\n    <div class=\"center-content position-relative\">\n        <div *ngIf=\"buttonText != null\" class=\"button-overlay center-content\">\n            <button type=\"button\" class=\"btn btn-primary\" [disabled]=\"!buttonEnabled\" (click)=\"connectSensor()\">{{buttonText}}</button>\n        </div>\n\n        <div *ngIf=\"heartRate != null\" class=\"button-overlay center-content heart-rate\">\n            {{heartRate}}\n        </div>\n\n        <div>\n            <i class=\"bi-heart-fill\"></i>\n        </div>\n    </div>\n\n</div>","import { NgModule } from '@angular/core';\nimport { BrowserModule } from '@angular/platform-browser';\n\nimport { AppRoutingModule } from './app-routing.module';\nimport { AppComponent } from './components/app/app.component';\nimport { HeartRateComponent } from './components/heart-rate/heart-rate.component';\nimport { TrainerComponent } from './components/trainer/trainer.component';\nimport { HeartRateDevice } from './devices/heart-rate.device';\n\n@NgModule({\n    declarations: [AppComponent, HeartRateComponent, TrainerComponent],\n    imports: [BrowserModule, AppRoutingModule],\n    providers: [HeartRateDevice],\n    bootstrap: [AppComponent],\n})\nexport class AppModule {}\n","import { from, interval, merge, Observable, of } from 'rxjs';\nimport { catchError, map, switchMap, take, tap } from 'rxjs/operators';\n\nconst retryCount = 5;\n\nexport function requestDevice(\n    services: [BluetoothServiceUUID, ...BluetoothServiceUUID[]],\n    retries = 0,\n): Observable<BluetoothRemoteGATTServer> {\n    console.log(`requestDevice(${retries})...`, services);\n    return from(navigator.bluetooth.requestDevice({ filters: [{ services }] })).pipe(\n        tap((device) => console.log(`Device Selected:`, device.name)),\n        map((device) => {\n            if (device.gatt == null) {\n                throw new Error(`gatt is not defined on device`);\n            }\n            return device.gatt;\n        }),\n        catchError((err) => {\n            console.log(`Error selecting device`, err);\n            if (retries >= retryCount || err.name === 'NotFoundError') {\n                throw err;\n            } else {\n                return requestDevice(services, retries + 1);\n            }\n        }),\n    );\n}\n\nexport function timeOutStream<T>(timeInMs: number): Observable<T> {\n    console.log(`Starting timeout...`, timeInMs);\n\n    return interval(timeInMs).pipe(\n        take(1),\n        map(() => {\n            throw new Error(`Timeout waiting for device connection.`);\n        }),\n    );\n}\n\nexport function handleDeviceDisconnection(server: BluetoothRemoteGATTServer): Observable<BluetoothRemoteGATTServer> {\n    const disconnectionStream = new Observable<BluetoothRemoteGATTServer>((observer) => {\n        function handleEvent(event: Event) {\n            console.log(`Gatt server disconnected`, event);\n            observer.next(server);\n        }\n        console.log(`Add event listener: gattserverdisconnected`);\n        server.device.addEventListener('gattserverdisconnected', handleEvent);\n\n        return {\n            unsubscribe: () => {\n                console.log(`Remove Event Listener: gattserverdisconnected`);\n                server.device.removeEventListener('gattserverdisconnected', handleEvent);\n            },\n        };\n    }).pipe(switchMap(() => connectServer(server)));\n\n    return merge(of(server), disconnectionStream);\n}\n\nexport function connectServer(server: BluetoothRemoteGATTServer, retries = 0): Observable<BluetoothRemoteGATTServer> {\n    console.log(`connectServer(${retries})...`);\n\n    return new Observable<BluetoothRemoteGATTServer>((observer) => {\n        console.log(`Connecting to server...`);\n        server.connect().then(\n            () => {\n                console.log(`Server Connected`, server);\n                observer.next(server);\n            },\n            (error) => observer.error(error),\n        );\n\n        return {\n            unsubscribe: () => {\n                if (server.connected) {\n                    console.log(`Disconnecting from server...`, server);\n                    server.disconnect();\n                } else {\n                    console.log(`Server already disconnected`, server);\n                }\n            },\n        };\n    }).pipe(\n        catchError((err) => {\n            console.log(`Error connecting to server`, err);\n            if (retries < retryCount) {\n                return connectServer(server, retries + 1);\n            } else {\n                throw err;\n            }\n        }),\n    );\n}\n\nexport function getService(\n    server: BluetoothRemoteGATTServer,\n    service: BluetoothServiceUUID,\n    retries = 0,\n): Observable<BluetoothRemoteGATTService> {\n    console.log(`getService(${retries}) '${service}'...`, server);\n\n    return from(server.getPrimaryService(service)).pipe(\n        tap(() => console.log(`Service returned`)),\n        catchError((err) => {\n            console.log(`Error getting service: '${service}'`, server, err);\n            if (!server.connected) {\n                return connectServer(server, retries + 1).pipe(\n                    switchMap(() => getService(server, service, retries + 1)),\n                );\n            } else if (retries < 3) {\n                return getService(server, service, retries + 1);\n            } else {\n                throw err;\n            }\n        }),\n    );\n}\n\nexport function getNotifications(characteristic: BluetoothRemoteGATTCharacteristic): Observable<DataView> {\n    console.log(`starting notifications`, characteristic);\n    characteristic.startNotifications();\n\n    return new Observable((observer) => {\n        function handleEvent() {\n            if (characteristic.value != null) {\n                observer.next(characteristic.value);\n            }\n        }\n        characteristic.addEventListener('characteristicvaluechanged', handleEvent);\n\n        return {\n            unsubscribe: () => {\n                characteristic.removeEventListener('characteristicvaluechanged', handleEvent);\n            },\n        };\n    });\n}\n","import { Component } from '@angular/core';\n\n@Component({\n    selector: 'trainer',\n    templateUrl: './trainer.component.html',\n    styleUrls: ['./trainer.component.scss'],\n})\nexport class TrainerComponent {}\n","<p>trainer.component works!</p>\n","export const NOT_FOUND_ERROR = 'NotFoundError';\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\n\nconst routes: Routes = [];\n\n@NgModule({\n    imports: [RouterModule.forRoot(routes)],\n    exports: [RouterModule],\n})\nexport class AppRoutingModule {}\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n    enableProdMode();\n}\n\nplatformBrowserDynamic()\n    .bootstrapModule(AppModule)\n    .catch((err) => console.error(err));\n","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"zn8P\";"],"sourceRoot":"webpack:///"}